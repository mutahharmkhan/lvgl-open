---
title: lv_canvas.h
description: API reference for lv_canvas.h
api:
  functions: [lv_canvas_create, lv_canvas_set_buffer, lv_canvas_set_draw_buf, lv_canvas_set_px, lv_canvas_set_palette, lv_canvas_get_draw_buf, lv_canvas_get_px, lv_canvas_get_image, lv_canvas_get_buf, lv_canvas_copy_buf, lv_canvas_fill_bg, lv_canvas_init_layer, lv_canvas_finish_layer, lv_canvas_buf_size]
  macros: [LV_CANVAS_BUF_SIZE]
  variables: [lv_canvas_class]
---

<RelatedHeaders name="lv_canvas_private.h" isPrivate={false} />

<ApiSummary functions={14} macros={1} variables={1} />

## Functions

<ApiTabs items={["Setters (4)","Getters (4)","Other (6)"]}>
<ApiTab value="Setters (4)">

<ApiMember kind="function" name="lv_canvas_set_buffer" file="widgets/canvas/lv_canvas.h" line={62} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L62">

### lv_canvas_set_buffer

Set a buffer for the canvas.

Use <ApiLink name="lv_canvas_set_draw_buf" display="lv_canvas_set_draw_buf()" /> instead if you need to set a buffer with alignment requirement.

```c
void lv_canvas_set_buffer(lv_obj_t *obj, void *buf, int32_t w, int32_t h, lv_color_format_t cf)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `obj` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas object |
| `buf` | `void *` | buffer where content of canvas will be. The required size is (lv_image_color_format_get_px_size(cf) * w) / 8 * h) It can be allocated with <ApiLink name="lv_malloc" display="lv_malloc()" /> or it can be statically allocated array (e.g. static <ApiLink name="lv_color_t" /> buf[100*50]) or it can be an address in RAM or external SRAM |
| `w` | <ApiLink name="int32_t" /> | width of canvas |
| `h` | <ApiLink name="int32_t" /> | height of canvas |
| `cf` | <ApiLink name="lv_color_format_t" /> | color format. `LV_COLOR_FORMAT...` |


</ApiMember>

<ApiMember kind="function" name="lv_canvas_set_draw_buf" file="widgets/canvas/lv_canvas.h" line={71} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L71">

### lv_canvas_set_draw_buf

Set a draw buffer for the canvas. A draw buffer either can be allocated by <ApiLink name="lv_draw_buf_create" display="lv_draw_buf_create()" /> or defined statically by <ApiLink name="LV_DRAW_BUF_DEFINE_STATIC" />. When buffer start address and stride has alignment requirement, it's recommended to use <ApiLink name="lv_draw_buf_create" />.

```c
void lv_canvas_set_draw_buf(lv_obj_t *obj, lv_draw_buf_t *draw_buf)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `obj` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas object |
| `draw_buf` | <ApiLink name="lv_draw_buf_t" display="lv_draw_buf_t *" /> | pointer to a draw buffer |


</ApiMember>

<ApiMember kind="function" name="lv_canvas_set_px" file="widgets/canvas/lv_canvas.h" line={89} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L89">

### lv_canvas_set_px

Set a pixel's color and opacity

```c
void lv_canvas_set_px(lv_obj_t *obj, int32_t x, int32_t y, lv_color_t color, lv_opa_t opa)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `obj` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas |
| `x` | <ApiLink name="int32_t" /> | X coordinate of the pixel |
| `y` | <ApiLink name="int32_t" /> | Y coordinate of the pixel |
| `color` | <ApiLink name="lv_color_t" /> | the color |
| `opa` | <ApiLink name="lv_opa_t" /> | the opacity |

<Callout type="info">
The following color formats are supported LV_COLOR_FORMAT_I1/2/4/8, LV_COLOR_FORMAT_A8, LV_COLOR_FORMAT_RGB565, LV_COLOR_FORMAT_RGB888, LV_COLOR_FORMAT_XRGB8888, LV_COLOR_FORMAT_ARGB8888
</Callout>

<Callout type="info">
this function invalidates the canvas object every time, for best performance, if you're changing a lot of pixels in a loop, call <ApiLink name="lv_display_enable_invalidation" /> before the loop starts so the invalidation isn't done on every call
</Callout>


</ApiMember>

<ApiMember kind="function" name="lv_canvas_set_palette" file="widgets/canvas/lv_canvas.h" line={101} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L101">

### lv_canvas_set_palette

Set the palette color of a canvas for index format. Valid only for `LV_COLOR_FORMAT_I1/2/4/8`

```c
void lv_canvas_set_palette(lv_obj_t *obj, uint8_t index, lv_color32_t color)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `obj` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to canvas object |
| `index` | <ApiLink name="uint8_t" /> | the palette color to set:
- for <ApiLink name="lv_color_format_t" display="LV_COLOR_FORMAT_I1" />: 0..1
- for <ApiLink name="lv_color_format_t" display="LV_COLOR_FORMAT_I2" />: 0..3
- for <ApiLink name="lv_color_format_t" display="LV_COLOR_FORMAT_I4" />: 0..15
- for <ApiLink name="lv_color_format_t" display="LV_COLOR_FORMAT_I8" />: 0..255 |
| `color` | <ApiLink name="lv_color32_t" /> | the color to set |


</ApiMember>

</ApiTab>
<ApiTab value="Getters (4)">

<ApiMember kind="function" name="lv_canvas_get_draw_buf" file="widgets/canvas/lv_canvas.h" line={107} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L107">

### lv_canvas_get_draw_buf

```c
lv_draw_buf_t * lv_canvas_get_draw_buf(lv_obj_t *obj)
```

<span className="sr-only">Parameters</span>

| Name | Type |
|------|------|
| `obj` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> |


</ApiMember>

<ApiMember kind="function" name="lv_canvas_get_px" file="widgets/canvas/lv_canvas.h" line={116} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L116">

### lv_canvas_get_px

Get a pixel's color and opacity

```c
lv_color32_t lv_canvas_get_px(lv_obj_t *obj, int32_t x, int32_t y)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `obj` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas |
| `x` | <ApiLink name="int32_t" /> | X coordinate of the pixel |
| `y` | <ApiLink name="int32_t" /> | Y coordinate of the pixel |

**Returns:** <ApiLink name="lv_color32_t" /> — ARGB8888 color of the pixel


</ApiMember>

<ApiMember kind="function" name="lv_canvas_get_image" file="widgets/canvas/lv_canvas.h" line={123} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L123">

### lv_canvas_get_image

Get the image of the canvas as a pointer to an <ApiLink name="lv_image_dsc_t" /> variable.

```c
lv_image_dsc_t * lv_canvas_get_image(lv_obj_t *canvas)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `canvas` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas object |

**Returns:** <ApiLink name="lv_image_dsc_t" display="lv_image_dsc_t *" /> — pointer to the image descriptor.


</ApiMember>

<ApiMember kind="function" name="lv_canvas_get_buf" file="widgets/canvas/lv_canvas.h" line={132} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L132">

### lv_canvas_get_buf

Return the pointer for the buffer. It's recommended to use this function instead of the buffer form the return value of <ApiLink name="lv_canvas_get_image" display="lv_canvas_get_image()" /> as is can be aligned

```c
const void * lv_canvas_get_buf(lv_obj_t *canvas)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `canvas` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas object |

**Returns:** `const void *` — pointer to the buffer


</ApiMember>

</ApiTab>
<ApiTab value="Other (6)">

<ApiMember kind="function" name="lv_canvas_create" file="widgets/canvas/lv_canvas.h" line={41} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L41">

### lv_canvas_create

Create a canvas object

```c
lv_obj_t * lv_canvas_create(lv_obj_t *parent)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `parent` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to an object, it will be the parent of the new canvas |

**Returns:** <ApiLink name="lv_obj_t" display="lv_obj_t *" /> — pointer to the created canvas


</ApiMember>

<ApiMember kind="function" name="lv_canvas_copy_buf" file="widgets/canvas/lv_canvas.h" line={147} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L147">

### lv_canvas_copy_buf

Copy a buffer to the canvas

```c
void lv_canvas_copy_buf(lv_obj_t *obj, const lv_area_t *canvas_area, lv_draw_buf_t *src_buf, const lv_area_t *src_area)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `obj` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas object |
| `canvas_area` | <ApiLink name="lv_area_t" display="const lv_area_t *" /> | the area of the canvas to copy the new data to |
| `src_buf` | <ApiLink name="lv_draw_buf_t" display="lv_draw_buf_t *" /> | pointer to a buffer holding the source data |
| `src_area` | <ApiLink name="lv_area_t" display="const lv_area_t *" /> | the area of the source buffer to copy from. If NULL, copy the whole buffer. |

<Callout type="info">
canvas_area and src_area should be the same size. If canvas_area and the size of src_buf are the same, src_area can be left NULL.
</Callout>


</ApiMember>

<ApiMember kind="function" name="lv_canvas_fill_bg" file="widgets/canvas/lv_canvas.h" line={156} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L156">

### lv_canvas_fill_bg

Fill the canvas with color

```c
void lv_canvas_fill_bg(lv_obj_t *obj, lv_color_t color, lv_opa_t opa)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `obj` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas |
| `color` | <ApiLink name="lv_color_t" /> | the background color |
| `opa` | <ApiLink name="lv_opa_t" /> | the desired opacity |


</ApiMember>

<ApiMember kind="function" name="lv_canvas_init_layer" file="widgets/canvas/lv_canvas.h" line={164} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L164">

### lv_canvas_init_layer

Initialize a layer to use LVGL's generic draw functions (lv_draw_rect/label/...) on the canvas. Needs to be usd in pair with <ApiLink name="lv_canvas_finish_layer" />.

```c
void lv_canvas_init_layer(lv_obj_t *canvas, lv_layer_t *layer)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `canvas` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas |
| `layer` | <ApiLink name="lv_layer_t" display="lv_layer_t *" /> | pointer to a layer variable to initialize |


</ApiMember>

<ApiMember kind="function" name="lv_canvas_finish_layer" file="widgets/canvas/lv_canvas.h" line={172} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L172">

### lv_canvas_finish_layer

Wait until all the drawings are finished on layer. Needs to be usd in pair with <ApiLink name="lv_canvas_init_layer" />.

```c
void lv_canvas_finish_layer(lv_obj_t *canvas, lv_layer_t *layer)
```

<span className="sr-only">Parameters</span>

| Name | Type | Description |
|------|------|-------------|
| `canvas` | <ApiLink name="lv_obj_t" display="lv_obj_t *" /> | pointer to a canvas |
| `layer` | <ApiLink name="lv_layer_t" display="lv_layer_t *" /> | pointer to a layer to finalize |


</ApiMember>

<ApiMember kind="function" name="lv_canvas_buf_size" file="widgets/canvas/lv_canvas.h" line={183} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L183">

### lv_canvas_buf_size

Just a wrapper to <ApiLink name="LV_CANVAS_BUF_SIZE" /> for bindings.

```c
uint32_t lv_canvas_buf_size(int32_t w, int32_t h, uint8_t bpp, uint8_t stride)
```

<span className="sr-only">Parameters</span>

| Name | Type |
|------|------|
| `w` | <ApiLink name="int32_t" /> |
| `h` | <ApiLink name="int32_t" /> |
| `bpp` | <ApiLink name="uint8_t" /> |
| `stride` | <ApiLink name="uint8_t" /> |


</ApiMember>

</ApiTab>
</ApiTabs>
## Macros

<ApiMember kind="macro" name="LV_CANVAS_BUF_SIZE" file="widgets/canvas/lv_canvas.h" line={178} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L178">

### LV_CANVAS_BUF_SIZE

```c
#define LV_CANVAS_BUF_SIZE(w, h, bpp, stride) \
    (((((w * bpp + 7) >> 3) + stride - 1) & ~(stride - 1)) * h + LV_DRAW_BUF_ALIGN)
```


</ApiMember>

## Variables

<ApiMember kind="variable" name="lv_canvas_class" file="widgets/canvas/lv_canvas.h" line={30} url="https://github.com/lvgl/lvgl/blob/master/src/widgets/canvas/lv_canvas.h#L30">

### lv_canvas_class

```c
const lv_obj_class_t lv_canvas_class
```


</ApiMember>

## Dependencies

<FileIncludes
  includes={["lv_conf_internal.h", "lv_image.h", "lv_draw_image.h"]}
  includedBy={["lv_barcode.h", "lv_qrcode.h", "lv_canvas_private.h"]}
  transitiveIncludes={["lv_anim.h", "lv_area.h", "lv_array.h", "lv_assert.h", "lv_bidi.h", "lv_color.h", "lv_color_op.h", "lv_conf_kconfig.h", "lv_display.h", "lv_draw.h", "lv_draw_arc.h", "lv_draw_blur.h", "lv_draw_buf.h", "lv_draw_label.h", "lv_draw_line.h", "lv_draw_rect.h", "lv_draw_triangle.h", "lv_event.h", "lv_ext_data.h", "lv_flex.h", "lv_font.h", "lv_fs.h", "lv_grad.h", "lv_grid.h", "lv_group.h", "lv_image_decoder.h", "lv_image_dsc.h", "lv_indev.h", "lv_layout.h", "lv_ll.h", "lv_log.h", "lv_math.h", "lv_matrix.h", "lv_mem.h", "lv_obj.h", "lv_obj_class.h", "lv_obj_draw.h", "lv_obj_event.h", "lv_obj_pos.h", "lv_obj_property.h", "lv_obj_property_names.h", "lv_obj_scroll.h", "lv_obj_style.h", "lv_obj_style_gen.h", "lv_obj_tree.h", "lv_observer.h", "lv_palette.h", "lv_profiler.h", "lv_profiler_builtin.h", "lv_sprintf.h", "lv_string.h", "lv_style.h", "lv_style_gen.h", "lv_style_properties.h", "lv_symbol_def.h", "lv_text.h", "lv_tick.h", "lv_timer.h", "lv_types.h"]}
/>